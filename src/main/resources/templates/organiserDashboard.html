<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  lang="en"
  th:replace="~{components/layout :: layout(~{::title}, ~{::section})}"
>
  <head>
    <title>Organizer Dashboard</title>
  </head>
  <body>
    <section class="page">
      <h1 class="section-title">Your upcoming events</h1>

      <!-- Error message block -->
      <div th:if="${error}" class="alert alert-error" th:text="${error}">
        Event not found or not hosted by you.
      </div>

      <div th:if="${#lists.isEmpty(events)}" class="empty-events">
        You havenâ€™t created any upcoming events yet.
      </div>

      <div class="cards" th:if="${!#lists.isEmpty(events)}">
        <article class="card" th:each="ev : ${events}">
          <div class="card-body">
            <div class="title-row">
              <h3 class="card-title" th:text="${ev.name}">Event name</h3>
              <div class="chip-row-inline" th:if="${ev.category != null}">
                <span class="chip" th:each="c : ${ev.category}" th:text="${c}"
                  >Category</span
                >
              </div>
            </div>

            <p
              class="muted"
              th:text="${#temporals.format(ev.dateTime, 'EEE, d MMM yyyy HH:mm')}"
            >
              Date
            </p>
            <p class="muted" th:text="${ev.location}">Location</p>

            <div class="card-actions">
              <a
                class="btn btn-dark"
                th:href="@{|/organiser/events/${ev.eventId}/rsvps|}"
              >
                View RSVPs
              </a>

              <!-- Organizer Edit/Delete Actions -->
              <a
                th:href="@{'/event/edit/' + ${ev.eventId}}"
                class="btn btn-blue"
                >Edit</a
              >
              <form
                class="inline"
                th:action="@{'/event/delete/' + ${ev.eventId}}"
                method="post"
                style="display: inline"
              >
                <button
                  type="submit"
                  onclick="return confirm('Are you sure you want to delete this event?');"
                  class="btn btn-danger"
                >
                  Delete
                </button>
              </form>
            </div>
          </div>
        </article>
      </div>
    </section>
  </body>
</html>
